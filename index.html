<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      The ChitraSells - Freemium AI Designs | Fashion, Decor & Jewellery
    </title>

    <!-- SEO Meta Tags for Search Engines -->
    <meta
      name="description"
      content="Experience the future of shopping with The ChitraSells. Use our AI-powered virtual try-on for fashion and home decor with our flexible freemium plans. Your imagination, powered by AI."
    />
    <meta
      name="keywords"
      content="AI fashion, virtual try-on, AI home decor, generative AI, LLM, Gemini, freemium, passkey, OTP, personalized designs, The ChitraSells, AI blog, tech trends, future of e-commerce, NLP, Google Cloud Database"
    />
    <meta name="author" content="The ChitraSells" />
    <link rel="canonical" href="https://yourwebsite.com/the-chitrasells" />

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json" />

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --bg-primary: #1a1a2e;
        --bg-secondary: #252839;
        --text-color: #e4e4e7;
        --accent-purple: #9275d2;
        --accent-cyan: #00bcd4;
      }
      body {
        font-family: "Montserrat", sans-serif;
        background-color: var(--bg-primary);
        color: var(--text-color);
        overflow-x: hidden;
      }
      h1,
      h2,
      h3 {
        font-family: "Playfair Display", serif;
      }
      .btn-primary {
        padding: 0.75rem 2rem;
        background: linear-gradient(to right, #a78bfa, #06b6d4);
        color: #fff;
        font-weight: bold;
        border-radius: 9999px;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s, box-shadow 0.3s;
        outline: none;
      }
      .btn-primary:hover {
        transform: scale(1.05);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 8px 10px -6px rgba(0, 0, 0, 0.1);
      }
      .btn-ai-suggestion {
        background: linear-gradient(to right, #6d28d9, #9333ea);
        border: 1px solid #a855f7;
      }
      .btn-ai-suggestion:hover {
        background: linear-gradient(to right, #7e22ce, #a855f7);
      }
      .btn-secondary {
        padding: 0.75rem 2rem;
        background: #fff;
        color: #111827;
        font-weight: bold;
        border-radius: 9999px;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s, box-shadow 0.3s;
        outline: none;
      }
      .btn-secondary:hover {
        transform: scale(1.05);
      }
      .card {
        background-color: #1f2937;
        border-radius: 1.5rem;
        padding: 1.5rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        border: 1px solid #374151;
        transition: box-shadow 0.5s;
      }
      .card:hover {
        box-shadow: 0 0 40px rgba(146, 117, 210, 0.5);
      }
      .input-field {
        width: 100%;
        padding: 1rem;
        background-color: #111827;
        border: 1px solid #374151;
        border-radius: 0.75rem;
        color: #fff;
        transition: border-color 0.2s, box-shadow 0.2s;
      }
      .input-field:focus {
        border-color: #06b6d4;
        box-shadow: 0 0 0 2px #06b6d4;
      }
      .marquee-container {
        background-color: #111827;
        padding: 0.5rem 0;
        overflow: hidden;
        white-space: nowrap;
      }
      .marquee-text {
        display: inline-block;
        font-size: 1.25rem;
        font-weight: 700;
        font-family: "Playfair Display", serif;
        color: var(--accent-cyan);
        text-shadow: 0 0 10px var(--accent-cyan), 0 0 20px var(--accent-purple);
        animation: marquee 25s linear infinite;
      }
      @keyframes marquee {
        from {
          transform: translateX(100vw);
        }
        to {
          transform: translateX(-100%);
        }
      }
      .gallery-item {
        position: relative;
        overflow: hidden;
        border-radius: 1rem;
      }
      .gallery-overlay {
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 1rem;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      .gallery-item:hover .gallery-overlay {
        opacity: 1;
      }
      .pricing-card {
        border: 1px solid #374151;
        transition: transform 0.3s, box-shadow 0.3s;
      }
      .pricing-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 25px -5px rgba(146, 117, 210, 0.3);
      }
      .pricing-card.popular {
        border-color: var(--accent-purple);
        position: relative;
        overflow: hidden;
      }
      .popular-badge {
        position: absolute;
        top: -1px;
        right: -1px;
        background: var(--accent-purple);
        color: white;
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
        font-weight: bold;
        border-bottom-left-radius: 1.5rem;
      }
    </style>
  </head>
  <body class="bg-primary">
    <!-- Custom Firebase Script -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
      import {
        getAuth,
        signInAnonymously,
        onAuthStateChanged,
        RecaptchaVerifier,
        signInWithPhoneNumber,
        signOut,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
      import {
        getFirestore,
        doc,
        onSnapshot,
        collection,
        addDoc,
        deleteDoc,
        getDoc,
        setDoc,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

      // --- GLOBAL STATE ---
      const FREE_GENERATION_LIMIT = 5;
      let db,
        auth,
        userId,
        userProfile = { generationCount: 0 };

      // --- UTILITY FUNCTIONS ---
      const $$ = (id) => document.getElementById(id);
      const showMessage = (title, message) =>
        window.showMessage(title, message);

      // --- FIREBASE INITIALIZATION & AUTH ---
      async function initializeFirebase() {
        try {
          const appId =
            typeof __app_id !== "undefined" ? __app_id : "default-app-id";
          const firebaseConfig =
            typeof __firebase_config !== "undefined"
              ? JSON.parse(__firebase_config)
              : {};
          const app = initializeApp(firebaseConfig);
          db = getFirestore(app);
          auth = getAuth(app);

          onAuthStateChanged(auth, async (user) => {
            if (user) {
              userId = user.uid;
              await loadUserProfile();
              $("my-designs-section").classList.remove("hidden");
              loadDesigns();
              updateUIForLoggedInUser(user);
            } else {
              userId = null;
              userProfile = { generationCount: 0 };
              updateUIForLoggedOutUser();
              signInAnonymously(auth).catch((err) =>
                console.error("Anonymous sign-in failed:", err)
              );
            }
          });
        } catch (error) {
          console.error("Firebase initialization failed:", error);
          showMessage("Error", "Failed to initialize the app.");
        }
      }

      const loadUserProfile = async () => {
        if (!userId) return;
        const userDocRef = doc(
          db,
          `artifacts/${
            typeof __app_id !== "undefined" ? __app_id : "default-app-id"
          }/users/${userId}`
        );
        const docSnap = await getDoc(userDocRef);
        if (docSnap.exists()) {
          userProfile = docSnap.data();
        } else {
          userProfile = { generationCount: 0, plan: "free" };
          await setDoc(userDocRef, userProfile);
        }
        updateGenerationCounter();
      };

      const updateUserProfile = async (data) => {
        if (!userId) return;
        const userDocRef = doc(
          db,
          `artifacts/${
            typeof __app_id !== "undefined" ? __app_id : "default-app-id"
          }/users/${userId}`
        );
        await setDoc(userDocRef, data, { merge: true });
      };

      // --- UI UPDATE FUNCTIONS ---
      const updateUIForLoggedInUser = (user) => {
        $("login-btn").classList.add("hidden");
        $("logout-btn").classList.remove("hidden");
        $("auth-modal").classList.add("hidden");
        if (!user.isAnonymous && user.phoneNumber) {
          $("user-info").textContent = user.phoneNumber;
          $("user-info").classList.remove("hidden");
        }
      };

      const updateUIForLoggedOutUser = () => {
        $("login-btn").classList.remove("hidden");
        $("logout-btn").classList.add("hidden");
        $("my-designs-section").classList.add("hidden");
        $("user-info").classList.add("hidden");
      };

      const updateGenerationCounter = () => {
        const remaining =
          FREE_GENERATION_LIMIT - (userProfile.generationCount || 0);
        const counterText = $("generation-count");
        if (remaining > 0) {
          counterText.textContent = remaining;
        } else {
          $("generation-count").parentElement.innerHTML =
            "Free limit reached. <a href='#pricing-section' class='text-cyan-400 underline'>Upgrade now</a>.";
        }
      };

      // --- BUSINESS LOGIC (Designs, etc.) ---
      const saveDesign = async (title, prompt, imageUrl, type) => {
        if (!userId)
          return showMessage(
            "Login Required",
            "Please sign in to save your designs."
          );
        try {
          await addDoc(
            collection(
              db,
              `artifacts/${
                typeof __app_id !== "undefined" ? __app_id : "default-app-id"
              }/users/${userId}/designs`
            ),
            { title, prompt, imageUrl, type, timestamp: new Date() }
          );
          showMessage("Success!", `${title} saved to your designs.`);
        } catch (e) {
          showMessage("Save Failed", "Could not save design.");
        }
      };

      const loadDesigns = () => {
        if (!userId) return;
        const q = collection(
          db,
          `artifacts/${
            typeof __app_id !== "undefined" ? __app_id : "default-app-id"
          }/users/${userId}/designs`
        );
        onSnapshot(q, (snapshot) => {
          const container = $("my-designs-gallery");
          container.innerHTML = snapshot.empty
            ? `<p class="text-center text-gray-500 col-span-full">You haven't saved any designs yet.</p>`
            : "";
          snapshot.forEach((docSnap) => {
            const data = docSnap.data();
            const card = document.createElement("div");
            card.className = "relative bg-gray-700 p-4 rounded-xl shadow-sm";
            card.innerHTML = `<img src="${data.imageUrl}" alt="${data.title}" class="w-full h-48 object-cover rounded-lg mb-2" /><h3 class="font-semibold text-lg text-gray-200 truncate">${data.title}</h3><p class="text-sm text-gray-400">${data.type} Design</p><button data-doc-id="${docSnap.id}" aria-label="Delete design" class="delete-btn absolute top-2 right-2 text-red-400 hover:text-red-600"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 112 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd" /></svg></button>`;
            container.appendChild(card);
          });
          container.querySelectorAll(".delete-btn").forEach((btn) =>
            btn.addEventListener("click", async (e) => {
              const docId = e.currentTarget.dataset.docId;
              await deleteDoc(
                doc(
                  db,
                  `artifacts/${
                    typeof __app_id !== "undefined"
                      ? __app_id
                      : "default-app-id"
                  }/users/${userId}/designs`,
                  docId
                )
              );
              showMessage("Deleted", "Design removed.");
            })
          );
        });
      };

      // --- EXPORT TO WINDOW SCOPE & INITIALIZE ---
      window.addEventListener("DOMContentLoaded", initializeFirebase);
      window.saveDesign = saveDesign;
      window.getAuth = () => auth;
      window.userProfile = () => userProfile;
      window.updateUserProfile = updateUserProfile;
    </script>

    <!-- Marquee Banner -->
    <div class="marquee-container">
      <span class="marquee-text">The ChitraSells</span>
    </div>

    <!-- Navigation Header -->
    <header
      class="p-4 md:p-6 bg-secondary shadow-md flex justify-between items-center z-50 sticky top-0"
    >
      <a href="#home-section" class="flex items-center space-x-4">
        <img
          src="cropped_circle_image (1).png"
          alt="The ChitraSells Logo"
          class="w-12 h-12 rounded-full"
        />
        <h1 class="text-2xl md:text-3xl font-bold text-white">
          The ChitraSells
        </h1>
      </a>
      <nav class="hidden md:flex items-center space-x-6">
        <a
          href="#home-section"
          class="text-gray-300 hover:text-white transition-colors font-semibold"
          >Home</a
        >
        <a
          href="#fashion-section"
          class="text-gray-300 hover:text-white transition-colors font-semibold"
          >Virtual Try-On</a
        >
        <a
          href="#art-gallery-section"
          class="text-gray-300 hover:text-white transition-colors font-semibold"
          >Art Gallery</a
        >
        <a
          href="blog.html"
          class="text-gray-300 hover:text-white transition-colors font-semibold"
          >Blogs</a
        >
        <a
          href="#contact"
          class="text-gray-300 hover:text-white transition-colors font-semibold"
          >Contact Us</a
        >
      </nav>
      <div id="auth-container" class="flex items-center space-x-4">
        <span id="user-info" class="text-gray-300 hidden"></span>
        <button id="login-btn" class="btn-primary">Login</button>
        <button id="logout-btn" class="btn-secondary hidden">Sign Out</button>
      </div>
    </header>

    <main class="container mx-auto p-4 md:p-8 space-y-24">
      <!-- Hero Section (Home) -->
      <section
        id="home-section"
        class="text-center py-20 md:py-32 space-y-6 bg-secondary rounded-3xl shadow-xl border border-gray-700"
      >
        <h2
          class="text-4xl md:text-6xl font-extrabold leading-tight text-white"
        >
          Your Imagination, <br /><span
            class="bg-gradient-to-r from-purple-500 to-cyan-500 bg-clip-text text-transparent"
            >Powered by AI.</span
          >
        </h2>
        <p class="text-lg md:text-xl text-gray-400 max-w-2xl mx-auto">
          Create, visualize, and save unique designs for fashion, decor, and
          more using the power of Large Language Models and AI.
        </p>
        <div class="flex justify-center space-x-4">
          <a href="#fashion-section" class="btn-primary">Start Designing</a>
          <a href="#pricing-section" class="btn-secondary">View Plans</a>
        </div>
      </section>

      <!-- Fashion Try-On Section -->
      <section id="fashion-section" class="py-12">
        <div class="text-center mb-12 space-y-4">
          <h2 class="text-3xl md:text-5xl font-bold text-white">
            Virtual Fashion Try-On
          </h2>
          <p class="text-gray-400 max-w-xl mx-auto">
            See how different outfits look. Upload a photo, describe your
            outfit, and let our AI transform it.
          </p>
          <div id="generation-counter-container" class="text-center mt-4">
            <p class="text-lg">
              Generations Left:
              <span id="generation-count" class="font-bold text-cyan-400"
                >5</span
              >
            </p>
          </div>
        </div>
        <div
          class="flex flex-col lg:flex-row items-center justify-center gap-8"
        >
          <div
            class="relative w-full lg:w-1/2 bg-secondary rounded-3xl overflow-hidden shadow-xl aspect-[3/4] border border-gray-700"
          >
            <img
              id="tryon-output-img"
              src="https://placehold.co/600x800/252839/e4e4e7?text=Try-on+Output"
              alt="AI-generated fashion virtual try-on output"
              class="absolute inset-0 w-full h-full object-cover rounded-3xl transition-opacity duration-300"
            />
            <div
              id="tryon-loading"
              class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-75 z-10 hidden"
            >
              <div
                class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500"
              ></div>
            </div>
          </div>
          <div class="w-full lg:w-1/2 p-4 md:p-8 card space-y-6">
            <div class="space-y-4">
              <label for="tryon-prompt" class="text-gray-300 font-medium"
                >Describe your outfit:</label
              >
              <textarea
                id="tryon-prompt"
                class="input-field"
                rows="4"
                placeholder="E.g., A sleek black leather jacket with a white t-shirt and ripped blue jeans."
              ></textarea>
            </div>
            <div class="grid grid-cols-2 gap-4">
              <button
                id="tryon-generate-btn"
                class="btn-primary w-full flex items-center justify-center gap-2"
                aria-label="Generate outfit"
                disabled
              >
                Generate
              </button>
              <button
                id="suggest-fashion-btn"
                class="btn-primary btn-ai-suggestion w-full flex items-center justify-center gap-2"
                aria-label="Suggest outfit idea"
              >
                ✨ Suggest
              </button>
            </div>
            <button
              id="tryon-save-btn"
              class="btn-secondary w-full flex items-center justify-center gap-2 hidden"
              aria-label="Save fashion design"
            >
              Save Design
            </button>
            <div class="mt-4">
              <label
                for="tryon-image-upload"
                class="flex justify-center w-full px-4 py-6 text-gray-500 border-2 border-dashed border-gray-700 rounded-xl cursor-pointer hover:bg-gray-900 transition-colors"
              >
                <svg
                  class="w-8 h-8 mr-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"
                  ></path>
                </svg>
                <span class="font-medium">Click to upload your photo</span>
                <input
                  id="tryon-image-upload"
                  type="file"
                  accept="image/*"
                  class="hidden"
                />
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- My Designs Section -->
      <section id="my-designs-section" class="py-12 hidden">
        <div class="text-center mb-12 space-y-4">
          <h2 class="text-3xl md:text-5xl font-bold text-white">
            My Saved Designs
          </h2>
          <p class="text-gray-400 max-w-xl mx-auto">
            A gallery of your unique, AI-powered creations, saved to your
            account.
          </p>
        </div>
        <div
          id="my-designs-gallery"
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
        >
          <!-- Designs loaded here -->
        </div>
      </section>

      <!-- Pricing Section -->
      <section id="pricing-section" class="py-12">
        <div class="text-center mb-12 space-y-4">
          <h2 class="text-3xl md:text-5xl font-bold text-white">Our Plans</h2>
          <p class="text-gray-400 max-w-xl mx-auto">
            Choose a plan that fits your creative needs. Prices are adjusted for
            your region.
          </p>
          <div class="max-w-xs mx-auto">
            <select id="country-selector" class="input-field">
              <option value="IN">India (INR)</option>
              <option value="US">United States (USD)</option>
              <option value="GB">United Kingdom (GBP)</option>
              <option value="CA">Canada (CAD)</option>
            </select>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
          <!-- Free Plan -->
          <div class="card pricing-card p-8 flex flex-col">
            <h3 class="text-2xl font-bold text-center">Free</h3>
            <p class="text-center text-4xl font-bold my-4">
              ₹0<span class="text-lg font-normal">/mo</span>
            </p>
            <ul class="space-y-2 text-gray-400 flex-grow">
              <li>✓ 5 AI Generations</li>
              <li>✓ Basic Prompt Assistance</li>
              <li>✓ Save up to 3 Designs</li>
              <li>✗ High-Resolution Exports</li>
            </ul>
            <a
              href="#fashion-section"
              class="btn-secondary w-full text-center mt-6"
              >Get Started</a
            >
          </div>
          <!-- Premium Plan -->
          <div class="card pricing-card popular p-8 flex flex-col">
            <div class="popular-badge">Most Popular</div>
            <h3 class="text-2xl font-bold text-center">Premium</h3>
            <p
              id="premium-price"
              class="text-center text-4xl font-bold my-4 text-cyan-400"
            >
              ₹499<span class="text-lg font-normal">/mo</span>
            </p>
            <ul class="space-y-2 text-gray-400 flex-grow">
              <li>✓ 100 AI Generations</li>
              <li>✓ Advanced Gemini Suggestions</li>
              <li>✓ Unlimited Design Saves</li>
              <li>✓ High-Resolution Exports</li>
            </ul>
            <a href="#" class="btn-primary w-full text-center mt-6"
              >Upgrade Now</a
            >
          </div>
          <!-- Enterprise Plan -->
          <div class="card pricing-card p-8 flex flex-col">
            <h3 class="text-2xl font-bold text-center">Enterprise</h3>
            <p class="text-center text-4xl font-bold my-4">Contact Us</p>
            <ul class="space-y-2 text-gray-400 flex-grow">
              <li>✓ Unlimited AI Generations</li>
              <li>✓ Dedicated AI Models</li>
              <li>✓ Team Collaboration Tools</li>
              <li>✓ Priority Support</li>
            </ul>
            <a href="#contact" class="btn-secondary w-full text-center mt-6"
              >Contact Sales</a
            >
          </div>
        </div>
      </section>

      <!-- Art Gallery Section -->
      <section id="art-gallery-section" class="py-12">
        <div class="text-center mb-12 space-y-4">
          <h2 class="text-3xl md:text-5xl font-bold text-white">Art Gallery</h2>
          <p class="text-gray-400 max-w-xl mx-auto">
            Get inspired by a collection of AI-generated designs.
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <div class="gallery-item">
            <img
              src="https://placehold.co/600x800/252839/e4e4e7?text=Cyberpunk+Jacket"
              alt="Art Gallery item 1"
              class="w-full h-full object-cover"
            />
            <div class="gallery-overlay">
              <span>A cyberpunk leather jacket with neon blue accents.</span>
            </div>
          </div>
          <div class="gallery-item">
            <img
              src="https://placehold.co/600x800/252839/e4e4e7?text=Minimalist+Watch"
              alt="Art Gallery item 2"
              class="w-full h-full object-cover"
            />
            <div class="gallery-overlay">
              <span
                >A minimalist watch with a marble face and rose gold
                hands.</span
              >
            </div>
          </div>
          <div class="gallery-item">
            <img
              src="https://placehold.co/600x800/252839/e4e4e7?text=Velvet+Sofa"
              alt="Art Gallery item 3"
              class="w-full h-full object-cover"
            />
            <div class="gallery-overlay">
              <span
                >An emerald green velvet sofa in a sunlit, modern living
                room.</span
              >
            </div>
          </div>
        </div>
      </section>

      <!-- Blogs Section -->
      <section id="blogs-section" class="py-12">
        <div class="text-center mb-12 space-y-4">
          <h2 class="text-3xl md:text-5xl font-bold text-white">Our Blogs</h2>
          <p class="text-gray-400 max-w-xl mx-auto">
            Explore articles on the latest in AI, fashion, and home decor
            technology.
          </p>
        </div>
        <div
          id="blog-posts-container"
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
        >
          <!-- Blog Posts will be dynamically rendered here -->
        </div>
        <div class="text-center mt-12">
          <a href="blog.html" class="btn-primary">View All Articles</a>
        </div>
      </section>

      <!-- Contact Section -->
      <section id="contact" class="py-12">
        <div class="text-center mb-12 space-y-4">
          <h2 class="text-3xl md:text-5xl font-bold text-white">
            Get in Touch
          </h2>
          <p class="text-gray-400 max-w-xl mx-auto">
            Have a question or a brilliant idea? We'd love to hear from you.
          </p>
        </div>
        <div class="max-w-xl mx-auto card p-8 space-y-6">
          <form id="contact-form" aria-label="Contact Form">
            <div>
              <label
                for="name"
                class="block text-sm font-medium text-gray-300 mb-2"
                >Name</label
              >
              <input
                type="text"
                id="name"
                name="name"
                class="input-field"
                placeholder="Your Name"
                required
              />
            </div>
            <div>
              <label
                for="email"
                class="block text-sm font-medium text-gray-300 mb-2"
                >Email</label
              >
              <input
                type="email"
                id="email"
                name="email"
                class="input-field"
                placeholder="you@example.com"
                required
              />
            </div>
            <div>
              <label
                for="message"
                class="block text-sm font-medium text-gray-300 mb-2"
                >Message</label
              >
              <textarea
                id="message"
                name="message"
                rows="4"
                class="input-field"
                placeholder="Your message..."
                required
              ></textarea>
            </div>
            <button
              type="submit"
              class="btn-primary w-full"
              aria-label="Submit contact form"
            >
              Send Message
            </button>
          </form>
        </div>
      </section>
    </main>

    <!-- Auth Modal -->
    <div
      id="auth-modal"
      class="fixed inset-0 z-[100] bg-black bg-opacity-75 flex items-center justify-center hidden"
    >
      <div class="card max-w-md w-full space-y-4 relative">
        <button
          id="auth-close-btn"
          class="absolute top-4 right-4 text-gray-400 hover:text-white"
        >
          &times;
        </button>
        <h3 class="text-2xl font-bold text-white text-center">
          Login or Sign Up
        </h3>

        <div id="phone-auth-container">
          <label
            for="phone-number-input"
            class="block text-sm font-medium text-gray-300 mb-2"
            >Enter your phone number (with country code):</label
          >
          <input
            type="tel"
            id="phone-number-input"
            class="input-field"
            placeholder="+91 12345 67890"
          />
          <button id="send-otp-btn" class="btn-primary w-full mt-4">
            Send OTP
          </button>
        </div>

        <div id="otp-container" class="hidden">
          <label
            for="otp-input"
            class="block text-sm font-medium text-gray-300 mb-2"
            >Enter OTP:</label
          >
          <input
            type="text"
            id="otp-input"
            class="input-field"
            placeholder="123456"
          />
          <button id="verify-otp-btn" class="btn-primary w-full mt-4">
            Verify OTP
          </button>
        </div>

        <div class="text-center text-gray-500 my-4">or</div>

        <button id="passkey-btn" class="btn-secondary w-full">
          Sign in with a Passkey
        </button>

        <div id="recaptcha-container" class="mt-4 flex justify-center"></div>
      </div>
    </div>

    <!-- Suggestion Modal -->
    <div
      id="suggestion-modal"
      class="fixed inset-0 z-[100] bg-black bg-opacity-75 flex items-center justify-center hidden"
    >
      <div class="card max-w-lg w-full space-y-4">
        <h3 id="modal-title" class="text-2xl font-bold text-white text-center">
          Get an AI-Powered Suggestion
        </h3>
        <div>
          <label
            for="modal-keywords"
            class="block text-sm font-medium text-gray-300 mb-2"
            >Enter some keywords (e.g., "summer, casual, blue"):</label
          >
          <input
            type="text"
            id="modal-keywords"
            class="input-field"
            placeholder="Keywords..."
          />
        </div>
        <div id="modal-loader" class="text-center hidden">
          <div
            class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500 mx-auto"
          ></div>
          <p class="mt-2 text-gray-400">Gemini is thinking...</p>
        </div>
        <div class="flex gap-4">
          <button id="modal-generate-btn" class="btn-primary w-full">
            Generate Suggestion
          </button>
          <button id="modal-close-btn" class="btn-secondary w-full">
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Upgrade Modal -->
    <div
      id="upgrade-modal"
      class="fixed inset-0 z-[100] bg-black bg-opacity-75 flex items-center justify-center hidden"
    >
      <div class="card max-w-md w-full space-y-4 text-center">
        <h3 class="text-2xl font-bold text-white">Free Limit Reached</h3>
        <p class="text-gray-400">
          You've used all your free generations. Please upgrade to our Premium
          plan to continue creating.
        </p>
        <div class="flex gap-4">
          <a
            href="#pricing-section"
            id="upgrade-modal-action-btn"
            class="btn-primary w-full"
            >View Plans</a
          >
          <button id="upgrade-modal-close-btn" class="btn-secondary w-full">
            Maybe Later
          </button>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-secondary text-gray-400 py-12 px-8">
      <div
        class="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left"
      >
        <div>
          <h3 class="text-white text-xl font-bold mb-2">The ChitraSells</h3>
          <p class="text-sm">
            Revolutionizing e-commerce with AI-powered design.
          </p>
        </div>
        <div class="space-y-2">
          <h4 class="text-white font-semibold">Quick Links</h4>
          <ul class="space-y-1">
            <li>
              <a href="blog.html" class="hover:text-white transition-colors"
                >Blogs</a
              >
            </li>
            <li>
              <a href="#faq-section" class="hover:text-white transition-colors"
                >FAQs</a
              >
            </li>
            <li>
              <a href="privacy.html" class="hover:text-white transition-colors"
                >Privacy Policy</a
              >
            </li>
            <li>
              <a href="terms.html" class="hover:text-white transition-colors"
                >Terms & Conditions</a
              >
            </li>
          </ul>
        </div>
        <div class="space-y-2">
          <h4 class="text-white font-semibold">Follow Us</h4>
          <div class="flex justify-center md:justify-start space-x-4 mt-2">
            <a href="#" aria-label="Follow us on Twitter"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3.84 9.42 9.42 0 0 1-6.79-2.92c-.22.42-.4.85-.5 1.3.1.2.2.4.3.6a4.48 4.48 0 0 1-2-1.93c.14.4.3.8.5 1.2a4.48 4.48 0 0 0 3.12 3.1c-.26.07-.52.1-.78.1-.19 0-.38-.01-.57-.03 1.15 3.17 4.23 5.51 7.9 5.51a9.42 9.42 0 0 1-5.83 2c-.18 0-.35-.01-.52-.02a10.95 10.95 0 0 0 5.92 1.74c6.7 0 10.36-5.54 10.36-10.36 0-.16-.01-.33-.02-.49.71-.51 1.33-1.15 1.8-1.88z"
                /></svg
            ></a>
            <a href="#" aria-label="Follow us on Instagram"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="2" y="2" width="20" height="20" rx="5" ry="5" />
                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" />
                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5" /></svg
            ></a>
          </div>
        </div>
      </div>
      <div class="mt-8 text-center text-sm">
        &copy; 2025 The ChitraSells. All rights reserved.
      </div>
    </footer>

    <!-- Custom Message Box -->
    <div
      id="message-box"
      class="fixed bottom-4 right-4 z-[101] transform transition-all duration-300 opacity-0 translate-y-4 pointer-events-none"
    >
      <div
        id="message-content"
        class="bg-gray-800 text-white rounded-lg p-4 shadow-lg flex items-center space-x-3 max-w-xs border border-gray-700"
      >
        <div id="message-icon"></div>
        <div id="message-text" class="text-sm font-medium"></div>
      </div>
    </div>

    <script type="module">
      import {
        RecaptchaVerifier,
        signInWithPhoneNumber,
        signOut,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

      // --- CONSTANTS & STATE ---
      const prices = {
        IN: { symbol: "₹", rate: 499 },
        US: { symbol: "$", rate: 7 },
        GB: { symbol: "£", rate: 6 },
        CA: { symbol: "C$", rate: 9 },
      };

      // --- UTILITY FUNCTIONS ---
      const $ = (id) => document.getElementById(id);
      const toggleLoading = (element, show) =>
        element.classList.toggle("hidden", !show);

      const showLocalMessage = (title, message) => {
        const msgBox = $("message-box");
        const msgText = $("message-text");
        const msgIcon = $("message-icon");
        msgText.innerHTML = `<strong>${title}:</strong> ${message}`;
        msgIcon.innerHTML = title.toLowerCase().includes("success")
          ? `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`
          : `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`;
        msgBox.classList.remove(
          "opacity-0",
          "translate-y-4",
          "pointer-events-none"
        );
        setTimeout(() => {
          msgBox.classList.add(
            "opacity-0",
            "translate-y-4",
            "pointer-events-none"
          );
        }, 5000);
      };
      window.showMessage = showLocalMessage;

      // --- CORE LOGIC ---
      document.addEventListener("DOMContentLoaded", () => {
        const auth = window.getAuth();

        // --- AUTHENTICATION LOGIC ---
        const setupRecaptcha = () => {
          if (!window.recaptchaVerifier) {
            window.recaptchaVerifier = new RecaptchaVerifier(
              auth,
              "recaptcha-container",
              {
                size: "invisible",
                callback: (response) => {
                  /* reCAPTCHA solved */
                },
              }
            );
          }
        };

        const onSendOtp = () => {
          setupRecaptcha();
          const phoneNumber = $("phone-number-input").value;
          const appVerifier = window.recaptchaVerifier;
          signInWithPhoneNumber(auth, phoneNumber, appVerifier)
            .then((confirmationResult) => {
              window.confirmationResult = confirmationResult;
              showLocalMessage("Success", "OTP sent to your phone.");
              $("phone-auth-container").classList.add("hidden");
              $("otp-container").classList.remove("hidden");
            })
            .catch((error) => {
              console.error("OTP Error", error);
              showLocalMessage(
                "Error",
                "Could not send OTP. Check the phone number format."
              );
              window.recaptchaVerifier.render().then((widgetId) => {
                grecaptcha.reset(widgetId);
              });
            });
        };

        const onVerifyOtp = () => {
          const code = $("otp-input").value;
          window.confirmationResult
            .confirm(code)
            .then((result) => {
              const user = result.user;
              showLocalMessage("Success!", "You are now logged in.");
              $("auth-modal").classList.add("hidden");
            })
            .catch((error) => {
              showLocalMessage("Error", "Invalid OTP. Please try again.");
            });
        };

        const onSignOut = () => {
          signOut(auth)
            .then(() => {
              showLocalMessage("Success", "You have been signed out.");
            })
            .catch((error) => {
              console.error("Sign out error", error);
            });
        };

        $$("login-btn").addEventListener("click", () =>
          $$("auth-modal").classList.remove("hidden")
        );
        $$("auth-close-btn").addEventListener("click", () =>
          $$("auth-modal").classList.add("hidden")
        );
        $$("logout-btn").addEventListener("click", onSignOut);
        $$("send-otp-btn").addEventListener("click", onSendOtp);
        $$("verify-otp-btn").addEventListener("click", onVerifyOtp);
        $$("passkey-btn").addEventListener("click", () =>
          showLocalMessage("Info", "Passkey support is coming soon!")
        );

        // --- FREEMIUM & PRICING LOGIC ---
        const updatePrices = (countryCode) => {
          const { symbol, rate } = prices[countryCode] || prices["US"];
          $$(
            "premium-price"
          ).innerHTML = `${symbol}${rate}<span class="text-lg font-normal">/mo</span>`;
        };

        const detectCountryAndSetPrice = async () => {
          try {
            const response = await fetch("https://ipapi.co/json/");
            const data = await response.json();
            const countryCode = data.country_code || "IN";
            $$("country-selector").value = prices[countryCode]
              ? countryCode
              : "US";
            updatePrices($$("country-selector").value);
          } catch (error) {
            $$("country-selector").value = "IN";
            updatePrices("IN");
          }
        };

        const checkGenerationLimit = () => {
          const profile = window.userProfile();
          if (profile.generationCount >= FREE_GENERATION_LIMIT) {
            $("upgrade-modal").classList.remove("hidden");
            return false;
          }
          return true;
        };

        const incrementGenerationCount = async () => {
          const profile = window.userProfile();
          profile.generationCount++;
          await window.updateUserProfile({
            generationCount: profile.generationCount,
          });
        };

        detectCountryAndSetPrice();
        $$("country-selector").addEventListener("change", (e) =>
          updatePrices(e.target.value)
        );

        // --- PAGE LOGIC ---
        $$("contact-form").addEventListener("submit", function (e) {
          e.preventDefault();
          this.checkValidity()
            ? (showLocalMessage("Success!", "Your message has been sent."),
              this.reset())
            : showLocalMessage("Error", "Please fill out all fields.");
        });

        const tryonPrompt = $$("tryon-prompt"),
          tryonGenerateBtn = $$("tryon-generate-btn"),
          tryonSaveBtn = $$("tryon-save-btn"),
          tryonOutputImg = $$("tryon-output-img"),
          tryonLoading = $$("tryon-loading");
        let userUploadedImage = null;
        $$("tryon-image-upload").addEventListener("change", (e) => {
          if (e.target.files[0]) {
            const reader = new FileReader();
            reader.onload = (event) => {
              userUploadedImage = event.target.result;
              tryonOutputImg.src = userUploadedImage;
              tryonGenerateBtn.disabled = false;
            };
            reader.readAsDataURL(e.target.files[0]);
          }
        });
        tryonGenerateBtn.addEventListener("click", async () => {
          if (!checkGenerationLimit()) return;
          const prompt = tryonPrompt.value.trim();
          if (!prompt || !userUploadedImage)
            return showLocalMessage(
              "Input Required",
              "Please upload a photo and describe the outfit."
            );
          toggleLoading(tryonLoading, true);
          tryonGenerateBtn.disabled = true;
          const base64Image = userUploadedImage.split(",")[1];
          const payload = {
            contents: [
              {
                parts: [
                  { text: prompt },
                  { inlineData: { mimeType: "image/png", data: base64Image } },
                ],
              },
            ],
            generationConfig: { responseModalities: ["IMAGE"] },
          };
          try {
            const response = await fetch(
              `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=`,
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload),
              }
            );
            if (!response.ok)
              throw new Error(`HTTP error! status: ${response.status}`);
            await incrementGenerationCount();
            const result = await response.json();
            const generatedBase64 =
              result?.candidates?.[0]?.content?.parts?.find((p) => p.inlineData)
                ?.inlineData?.data;
            if (generatedBase64) {
              const imageUrl = `data:image/jpeg;base64,${generatedBase64}`;
              tryonOutputImg.src = imageUrl;
              tryonSaveBtn.classList.remove("hidden");
              window.generatedFashionData = {
                title: "AI Outfit",
                prompt,
                imageUrl,
                type: "Fashion",
              };
            } else throw new Error("No image data in response.");
          } catch (error) {
            showLocalMessage("Generation Failed", "Could not generate outfit.");
          } finally {
            toggleLoading(tryonLoading, false);
            if (window.userProfile().generationCount < FREE_GENERATION_LIMIT)
              tryonGenerateBtn.disabled = false;
          }
        });
        tryonSaveBtn.addEventListener(
          "click",
          () =>
            window.generatedFashionData &&
            window.saveDesign(...Object.values(window.generatedFashionData))
        );

        const blogPosts = [
          { id: 1, title: "The Future of Shopping", content: "..." },
          { id: 2, title: "Designing Your Dream Home with AI", content: "..." },
          { id: 3, title: "NLP and Conversation", content: "..." },
        ];
        $$("blog-posts-container").innerHTML = blogPosts
          .map(
            (p) =>
              `<div class="card p-6"><h3 class="text-xl font-bold mb-2">${p.title}</h3><p class="text-gray-300 mb-4">${p.content}</p><a href="blog-post-${p.id}.html" class="text-cyan-500 hover:underline">Read More &rarr;</a></div>`
          )
          .join("");

        // --- MODAL LOGIC ---
        const suggestionModal = $$("suggestion-modal"),
          upgradeModal = $$("upgrade-modal");
        const openModal = (targetId, type) => {
          if (!checkGenerationLimit()) return;
          window.currentTargetTextarea = $$$(targetId);
          window.currentSuggestionType = type;
          $$("modal-title").textContent = `Get AI Suggestion for ${type}`;
          suggestionModal.classList.remove("hidden");
        };
        $$("suggest-fashion-btn").addEventListener("click", () =>
          openModal("tryon-prompt", "Fashion")
        );
        $$("modal-close-btn").addEventListener("click", () =>
          suggestionModal.classList.add("hidden")
        );
        const hideUpgradeModal = () => upgradeModal.classList.add("hidden");
        $$("upgrade-modal-close-btn").addEventListener(
          "click",
          hideUpgradeModal
        );
        $$("upgrade-modal-action-btn").addEventListener(
          "click",
          hideUpgradeModal
        );
        $$("modal-generate-btn").addEventListener("click", async () => {
          const keywords = $$("modal-keywords").value.trim();
          if (!keywords)
            return showLocalMessage("Input Required", "Please enter keywords.");
          toggleLoading($$("modal-loader"), true);
          $$("modal-generate-btn").disabled = true;
          const prompts = { Fashion: "...", Decor: "...", Jewellery: "..." };
          const payload = {
            contents: [
              {
                parts: [
                  {
                    text: `${
                      prompts[window.currentSuggestionType]
                    } ${keywords}`,
                  },
                ],
              },
            ],
          };
          try {
            const response = await fetch(
              `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=`,
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload),
              }
            );
            if (!response.ok) throw new Error("API request failed");
            await incrementGenerationCount();
            const result = await response.json();
            const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
            if (text) {
              window.currentTargetTextarea.value = text;
              suggestionModal.classList.add("hidden");
            } else throw new Error("No text generated.");
          } catch (error) {
            showLocalMessage(
              "Generation Failed",
              "Could not get a suggestion."
            );
          } finally {
            toggleLoading($$("modal-loader"), false);
            $$("modal-generate-btn").disabled = false;
          }
        });
      });
    </script>
  </body>
</html>
